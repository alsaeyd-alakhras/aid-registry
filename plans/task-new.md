# ๐ฏ TASK: ุชุญุณูู ุดุงุดุฉ ุงูุฅุฏุฎุงู โ Smart Family Detection & Aid History Sidebar

## ๐ด ุงููุฑุฌุน ุงูุฅูุฒุงูู

ุงูุงูุชุฒุงู ุงููุงูู ุจุงููููุงุช ุงูุชุงููุฉ:

* ููุงุนุฏ ุงููุธุงู 
* ุชุญููู ูุงุนุฏุฉ ุงูุจูุงูุงุช 
* ูุณุงุฑ ุงูููุธู 

---

# 1๏ธโฃ ุงููุฏู ุงูุนุงู

ุชุญููู ุดุงุดุฉ ุงูุฅุฏุฎุงู ุฅูู Smart Form:

* ุจุญุซ ุจุงููููุฉ (ุฃุณุงุณู ุฃู ุฒูุฌ)
* ุฅุธูุงุฑ Sidebar ุฌุงูุจู ุจุงููุนูููุงุช
* ูุณุฎ ุจูุงูุงุช ุงูุนุงุฆูุฉ
* ุนุฑุถ ุขุฎุฑ 10 ูุณุงุนุฏุงุช
* Modal ูุนุฑุถ ุชูุงุตูู ูุณุงุนุฏุฉ
* ููุน ุชูุฑุงุฑ ุงูุฒูุฌ/ุงูุฒูุฌุฉ
* ุนุฏู ุฅูุดุงุก ุฃุณุฑุฉ ููุฑุฑุฉ

---

# 2๏ธโฃ ุงูุชุนุฏููุงุช ุงููุทููุจุฉ ูู ุงููุงุฌูุฉ (UI / UX)

## ๐น ุจุฌุงูุจ ุญูู ุฑูู ุงููููุฉ:

```
[ ุฑูู ุงููููุฉ ] [ ุฒุฑ ุจุญุซ ]
```

### ุนูุฏ ุงูุถุบุท:

* AJAX Request ุฅูู endpoint ุฌุฏูุฏ:

```
GET /api/families/search-by-national-id/{id}
```

---

# 3๏ธโฃ ููุทู ุงูุจุญุซ

ุงูุณูุฑูุฑ ูููู ุจู:

1. ุงูุจุญุซ ูู:

   * families.national_id
   * families.spouse_national_id

2. ุฅุฐุง ูู ููุฌุฏ:

   * ูุง ูุธูุฑ Sidebar
   * ูููู ุงูุฅุฏุฎุงู ุทุจูุนู

3. ุฅุฐุง ูุฌุฏ:

   * ูุนูุฏ:

     * ุจูุงูุงุช ุงูุนุงุฆูุฉ
     * ูู ุงูุชุทุงุจู ูู ุงูุดุฎุต ุงูุฃุณุงุณู ุฃู ุงูุฒูุฌ
     * ุขุฎุฑ 10 ูุณุงุนุฏุงุช
     * ุนุฏุฏ ุฅุฌูุงูู ุงููุณุงุนุฏุงุช
     * ูู ุงูุฒูุฌ ูุณุฌู ูู ุฃุณุฑุฉ ุฃุฎุฑู

---

# 4๏ธโฃ ุจูุงุก Sidebar (Slide Over Panel)

ูุธูุฑ ูู ุงููููู (RTL-aware).

## ุงููุณู ุงูุฃูู โ ุจูุงูุงุช ุงูุฃุณุฑุฉ

ุนุฑุถ:

* ุงูุงุณู
* ุงููููุฉ
* ุงูุฌูุงู
* ููุงู ุงูุณูู
* ุนุฏุฏ ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ

ูุน ุฑุณุงูุฉ:

* ุฅุฐุง ุงูุจุญุซ ุทุงุจู national_id โ
  "ุชู ุงูุนุซูุฑ ุนูู ููุณ ุงูุดุฎุต"

* ุฅุฐุง ุทุงุจู spouse_national_id โ
  "ุชู ุงูุนุซูุฑ ุนูู ุณุฌู ุจุงุณู ุงูุฒูุฌ/ุงูุฒูุฌุฉ"

ุฒุฑ:

```
ูุณุฎ ุจูุงูุงุช ุงูุฃุณุฑุฉ
```

### ุนูุฏ ุงูุถุบุท:

* ุชุนุจุฆุฉ ุงูุญููู ูู ุงูููุฑู ููุท
* ูุง ูุชู ุญูุธ
* ุชุฎุฒูู family_id ูู hidden input

---

## ุงููุณู ุงูุซุงูู โ ุขุฎุฑ 10 ูุณุงุนุฏุงุช

ุนุฑุถ 10 ููุท:

ููู ุนูุตุฑ:

* ุงูููุชุจ
* ุงูุชุงุฑูุฎ
* ุงูุงุณู
* ููุน ุงููุณุงุนุฏุฉ
* ุงููููุฉ ุฃู ุงูุตูู

ุฒุฑ ุตุบูุฑ:

```
๐ ุนุฑุถ
```

### ุนูุฏ ุงูุถุบุท:

* AJAX:

```
GET /api/aid-distributions/{id}
```

* ูุชุญ Modal ูู ููุชุตู ุงูุดุงุดุฉ
* ูุง ูุบูู Sidebar

---

## ุงููุณู ุงูุซุงูุซ โ ุฒุฑ "ุนุฑุถ ุงููู"

ุฅุฐุง ุนุฏุฏ ุงููุณุงุนุฏุงุช > 10:

ุฒุฑ:

```
ุนุฑุถ ูู ุงููุณุงุนุฏุงุช
```

ููุชุญ ูุงุฆูุฉ ูุงููุฉ ุฏุงุฎู ููุณ Sidebar (Lazy Load).

---

# 5๏ธโฃ Modal ุชูุงุตูู ุงููุณุงุนุฏุฉ

ูุนุฑุถ:

## ุจูุงูุงุช ุงูุนูููุฉ

* ุงูููุชุจ
* ุงูููุน
* ุงููุจูุบ ุฃู ุงูุตูู
* ุงูุชุงุฑูุฎ
* ุงูููุงุญุธุงุช

## ุจูุงูุงุช ุงูุฃุณุฑุฉ ูุงููุฉ

* ูู ุงูุญููู
* ุญุงูุฉ ุงูุฒูุฌ
* ุนุฏุฏ ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ

Modal ูุณุชูู ุนู Sidebar.

---

# 6๏ธโฃ ููุทู ุงูุญูุธ (ุงูุฃูู)

ุนูุฏ ุงูุถุบุท ุนูู ุญูุธ:

## ุงูุญุงูุฉ 1 โ family_id ููุฌูุฏ (ุชู ุงููุณุฎ ูู Sidebar)

* update families
* insert aid_distributions

## ุงูุญุงูุฉ 2 โ ูุง ููุฌุฏ family_id

* ูุจุญุซ ูุฑุฉ ุฃุฎูุฑุฉ ุจุงููููุฉ (ุญูุงูุฉ ุฅุถุงููุฉ)
* ุฅุฐุง ูุฌุฏ:

  * ูุณุชุฎุฏู ููุณ family_id
  * update
  * insert distribution
* ุฅุฐุง ูู ููุฌุฏ:

  * insert family
  * insert distribution

---

# 7๏ธโฃ ููุน ุชูุฑุงุฑ ุงูุฒูุฌ/ุงูุฒูุฌุฉ

ูุจู ุฅูุดุงุก ุฃุณุฑุฉ ุฌุฏูุฏุฉ:

* ุฅุฐุง spouse_national_id ููุฌูุฏ ูู families ููational_id
  โ ูููุน ุฅูุดุงุก ุฃุณุฑุฉ ุฌุฏูุฏุฉ
  โ ูุณุชุฎุฏู ุงูุฃุณุฑุฉ ุงููุฏููุฉ

* ูุง ูุณูุญ ุจูุฌูุฏ ุดุฎุต:

  * primary ูู ุณุฌู
  * ู spouse ูู ุณุฌู ุขุฎุฑ

---

# 8๏ธโฃ ููุงุนุฏ ุงูุชุญูู

* ุงููููุฉ ูุทููุจุฉ
* aid_mode ูุทููุจ
* ุฅุฐุง cash:

  * cash_amount ูุทููุจ
* ุฅุฐุง in_kind:

  * aid_item_id ูุทููุจ
* ูุง ุญุฐู ูุนูููุงุช ุงูุตุฑู
  ููุท status = cancelled

---

# 9๏ธโฃ Endpoints ุงููุทููุจุฉ

```
GET    /api/families/search-by-national-id/{id}
GET    /api/aid-distributions/{id}
POST   /aid-distributions (ุงูุญูุธ ุงูููุญุฏ)
```

---

# ๐ ุงูุชุตููู

* Sidebar Slide Over ุงุญุชุฑุงูู (Tailwind)
* Shadow ูุงุถุญ
* ุชูุณูู ุฏุงุฎูู ุจู Card Layout
* Badge ุชุญุฐูุฑู ุจููู ุฃุตูุฑ ุฅุฐุง ุงูุฒูุฌ ูุณุฌู ูุณุจูุงู
* ุงุณุชุฎุฏุงู ููุณ ุณุชุงูู ุงูุฏุงุดุจูุฑุฏ
* RTL compatible
* Animation ุณูุณ (300ms ease-in-out)

---

# 11๏ธโฃ ูุง ููุณูุญ ุจู

* ุฅูุดุงุก ุตูุญุฉ ุฌุฏูุฏุฉ ููุนุงุฆูุฉ
* ุฅูุดุงุก ุตูุญุฉ ุฌุฏูุฏุฉ ูููุณุงุนุฏุฉ
* ุชุฎุฒูู ูุคูุช ุบูุฑ ุถุฑูุฑู
* ุญูุธ ุชููุงุฆู ุนูุฏ ุงููุณุฎ
* ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ

---

# 12๏ธโฃ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุงููุทููุจุฉ

โ ุดุงุดุฉ ูุงุญุฏุฉ
โ ููุน ุงูุชูุฑุงุฑ
โ ุณุฑุนุฉ ุฅุฏุฎุงู
โ ุนุฑุถ ุณุฌู ุณุงุจู
โ ุชุญุฏูุซ ูุธูู
โ ุชูุงุฑูุฑ ุฏูููุฉ
โ UX ูุงุถุญ ูุบูุฑ ูุนูุฏ

---