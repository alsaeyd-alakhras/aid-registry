ุณูุซุจุช ุงูุขู **ุงููุฎุทุท ุงูููุงุฆู ููุฌุฏุงูู ููุท** ุจุนุฏ ุงูุชุนุฏููุงุชุ ุจุฏูู ุงูุฏุฎูู ูู ุงููุงุฌูุงุช ุฃู ุงูููุทู.

ุงูุชุตููู ุงูููุงุฆู ูุนุชูุฏ ุนูู:

- ุฌุฏูู ุฃุณุฑ
- ุฌุฏูู ุฃููุงุน ูุณุงุนุฏุงุช ุนูููุฉ
- ุฌุฏูู ุนูููุงุช ุตุฑู
- ุฌุฏูู ููุงุชุจ
- ุงููุณุชุฎุฏููู ููุฌูุฏูู ูุณุจููุง

ููุฐุง ุฃูุถู ุชูุงุฒู ุจูู ุงูุจุณุงุทุฉ ููุงุจููุฉ ุงูุชูุงุฑูุฑ ูุณุชูุจูุงู.

---

# ๐ข ุงุณู ุงููุธุงู (Slug)

```
aid-registry
```

---

# ๐ข ุงูุฌุฏุงูู ุงูููุงุฆูุฉ

## 1) ุฌุฏูู ุงูููุงุชุจ `offices`

ููุซู ููุงู ุงูุตุฑู (ุบุฒุฉุ ุฑูุญุ ุฎุงููููุณ...)

### ุงูุญููู

| ุงูุญูู | ุงูููุน | ุงููุตู |
| --- | --- | --- |
| id | PK | ุฑูู ุงูููุชุจ |
| name | string | ุงุณู ุงูููุชุจ |
| location | string nullable | ูููุน ุฃู ูุตู ุงูููุชุจ |
| notes | text nullable | ููุงุญุธุงุช |
| is_active | boolean | ูู ุงูููุชุจ ูุนุงู |
| created_at | timestamp |  |
| updated_at | timestamp |  |

### ุงูุนูุงูุฉ

- ุงูููุชุจ ูุฏูู ุนูููุงุช ุตุฑู ูุซูุฑุฉ.
- ุงููุณุชุฎุฏู ูุฑุชุจุท ุจููุชุจ.

---

## 2) ุฌุฏูู ุงูุฃุณุฑ `families`

ููุซู ุงูุฃุณุฑุฉ ููุญุฏุฉ ูุงุญุฏุฉ.

ูู ุนูููุฉ ูุณุงุนุฏุฉ ุชุฑุชุจุท ุจุฃุณุฑุฉ.

### ุงูุญููู

| ุงูุญูู | ุงูููุน | ุงููุตู |
| --- | --- | --- |
| id | PK | ุฑูู ุงูุฃุณุฑุฉ |
| primary_name | string | ุงูุงุณู ุงูุฑุจุงุนู ูููุณุชููุฏ |
| national_id | string | ุฑูู ุงููููุฉ (ูุฑูุฏ) |
| mobile | string nullable | ุฑูู ุงูุฌูุงู |
| family_members_count | integer | ุนุฏุฏ ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ |
| housing_location | string | ููุงู ุงูุณูู |
| marital_status | enum | ุงูุญุงูุฉ ุงูุฒูุฌูุฉ |
| spouse_name | string nullable | ุงุณู ุงูุฒูุฌ/ุงูุฒูุฌุฉ |
| spouse_national_id | string nullable | ุฑูู ูููุฉ ุงูุฒูุฌ/ุงูุฒูุฌุฉ |
| created_by | FK user | ุงูููุธู ุงูุฐู ุณุฌู ุงูุฃุณุฑุฉ |
| created_at | timestamp |  |
| updated_at | timestamp |  |

---

### ููู ุงูุญุงูุฉ ุงูุฒูุฌูุฉ marital_status

```
single    = ุฃุนุฒุจ
married   = ูุชุฒูุฌ
widowed   = ุฃุฑูู / ุฃุฑููุฉ
divorced  = ูุทูู / ูุทููุฉ (ูุณุชูุจูุงู ูููุฏ)
```

### ุงููุงุนุฏุฉ ุงูููุทููุฉ

- ุฅุฐุง `married` โ ูุธูุฑ ุงุณู ุงูุฒูุฌ/ุงูุฒูุฌุฉ ููููุฉ ุงูุฒูุฌ/ุงูุฒูุฌุฉ.
- ุฅุฐุง `widowed` ุฃู `single` โ ูุง ููุฌุฏ spouse.

---

### ุงูุนูุงูุฉ

```
Family hasMany AidDistributions
```

---

## 3) ุฌุฏูู ุฃููุงุน ุงููุณุงุนุฏุงุช ุงูุนูููุฉ `aid_items`

ูุฐุง ุงูุฌุฏูู ููุท ูููุณุงุนุฏุงุช ุงูููููุณุฉ.

ูุง ููุฌุฏ ููู cash.

### ุงูุญููู

| ุงูุญูู | ุงูููุน | ุงููุตู |
| --- | --- | --- |
| id | PK | ุฑูู ุงูุตูู |
| name | string | ุงุณู ุงููุณุงุนุฏุฉ (ุทุฑุฏ ุบุฐุงุฆู...) |
| is_active | boolean | ูุงุจู ููุงุณุชุฎุฏุงู |
| created_at | timestamp |  |
| updated_at | timestamp |  |

### ุฃูุซูุฉ ุจูุงูุงุช

- ุทุฑุฏ ุบุฐุงุฆู
- ุทุฑุฏ ุตุญู
- ูุณูุฉ
- ุฎููุฉ
- ุญุฑุงูุงุช
- ูุณุงุฆู ุดุฑุงุฆูุฉ

---

## 4) ุฌุฏูู ุนูููุงุช ุงูุตุฑู `aid_distributions`

ูุฐุง ุฃูู ุฌุฏูู ูู ุงููุธุงู.

ูู ุตู = ุนูููุฉ ูุณุงุนุฏุฉ ูุงุญุฏุฉ.

---

### ุงูุญููู

| ุงูุญูู | ุงูููุน | ุงููุตู |
| --- | --- | --- |
| id | PK | ุฑูู ุงูุนูููุฉ |
| family_id | FK | ุงูุฃุณุฑุฉ ุงููุณุชููุฏุฉ |
| office_id | FK | ุงูููุชุจ ุงูุฐู ุตุฑู |
| aid_mode | enum | ููุน ุงูุตุฑู |
| aid_item_id | FK nullable | ููุน ุงููุณุงุนุฏุฉ ุงูุนูููุฉ |
| cash_amount | decimal nullable | ูููุฉ ุงููุณุงุนุฏุฉ ุงูููุฏูุฉ |
| distributed_at | datetime | ููุช ุงูุตุฑู |
| created_by | FK user | ุงูููุธู ุงูุฐู ุณุฌู ุงูุนูููุฉ |
| notes | text nullable | ููุงุญุธุงุช |
| created_at | timestamp |  |
| updated_at | timestamp |  |

---

### ููู aid_mode

```
cash
in_kind
```

---

### ุงูููุงุนุฏ ุงูููุทููุฉ

ุฅุฐุง:

```
aid_mode = cash
```

- ูุฌุจ ุฅุฏุฎุงู `cash_amount`
- ูููู `aid_item_id = null`

ุฅุฐุง:

```
aid_mode = in_kind
```

- ูุฌุจ ุงุฎุชูุงุฑ `aid_item_id`
- ูููู `cash_amount = null`

---

## ุงูุนูุงูุงุช ุงูููุงุฆูุฉ ุจูู ุงูุฌุฏุงูู

```
Office
   โโโ hasMany AidDistributions

Family
   โโโ hasMany AidDistributions

AidItem
   โโโ hasMany AidDistributions

User
   โโโ creates Families & Distributions
```

---

## ุดูู ุงููุธุงู ูู ุงููุงูุน

### ุชุณุฌูู ุฃุณุฑุฉ

ูุชู ุฅุฏุฎุงู:

- ุงูุงุณู
- ุงููููุฉ
- ุนุฏุฏ ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ
- ููุงู ุงูุณูู
- ุงูุญุงูุฉ ุงูุฒูุฌูุฉ
- ุจูุงูุงุช ุงูุฒูุฌ/ุงูุฒูุฌุฉ ุฅู ูุฌุฏ

---

### ุตุฑู ูุณุงุนุฏุฉ

ุงูููุธู:

1. ูุจุญุซ ุนู ุงูุฃุณุฑุฉ
2. ูุฎุชุงุฑ ุงูููุชุจ
3. ูุญุฏุฏ:
    - ููุฏู โ ููุชุจ ูุจูุบ
    - ุนููู โ ูุฎุชุงุฑ ุตูู
4. ุญูุธ ุงูุนูููุฉ

---

## ุงููุชูุฌุฉ

ุงููุธุงู:

- ุจุณูุท ููููุธู
- ููุธู ููุจูุงูุงุช
- ุงูุชูุงุฑูุฑ ุณููุฉ
- ููุน ุงูุชูุฑุงุฑ ุณูู
- ูุงุจู ููุชุทููุฑ

---

ูููููุ ูุณุฃุซุจุชูุง ูููุทุฉ ุชุตููู ุฃุณุงุณูุฉ ูููุธุงู:

## ูุจุฏุฃ ุงูุนูู ุงููุนุชูุฏ

**ูุงุฌูุฉ ูุงุญุฏุฉ ููุท ูููุณุชุฎุฏู** ูููุง:

- ุจูุงูุงุช ุงูุฃุณุฑุฉ
- ูู ููุณ ุงูุตูุญุฉ.
    - ุจูุงูุงุช ุงููุณุงุนุฏุฉ
        
        ูู ููุณ ุงูุตูุญุฉ.
        

ููู **ุงูุชุฎุฒูู ุฏุงุฎูููุง ูุชู ูู ุฌุฏูููู**:

1. ุฌุฏูู ุงูุฃุณุฑ `families`
2. ุฌุฏูู ุงูุตุฑู `aid_distributions`

---

## ููู ุณูุนูู ุงูุชุฎุฒูู ููุทูููุง (ููู ููููู ูู ุงูุขู)

ุนูุฏ ุงูุถุบุท ุนูู **ุญูุธ**:

### ุงูุญุงูุฉ 1 โ ุงูุฃุณุฑุฉ ุฌุฏูุฏุฉ

ุงููุธุงู:

1. ููุดุฆ ุณุฌู ูู `families`.
2. ูุฃุฎุฐ `family_id`.
3. ููุดุฆ ุณุฌู ุงููุณุงุนุฏุฉ ูู `aid_distributions`.

---

### ุงูุญุงูุฉ 2 โ ุงูุฃุณุฑุฉ ููุฌูุฏุฉ ูุณุจููุง

ุงููุธุงู:

1. ูุฌูุจ ุงูุฃุณุฑุฉ ุจุงููููุฉ.
2. ูุญุฏุซ ุจูุงูุงุชูุง ูู ุชุบูุฑ ุดูุก.
3. ูุถูู ุณุฌู ุตุฑู ุฌุฏูุฏ ููุท.

---

## ูุงุฐุง ูุนูู ูุฐุง ูุณุชูุจูุงูุ

- ูุง ููุฌุฏ ุตูุญุฉ "ุฅุถุงูุฉ ุฃุณุฑุฉ".
- ูุง ููุฌุฏ ุตูุญุฉ "ุฅุถุงูุฉ ูุณุงุนุฏุฉ".
- ูู ุดูุก ูู ุดุงุดุฉ ูุงุญุฏุฉ.
- ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุจูู ูุธููุฉ ููุชูุงุฑูุฑ.

---

## ูุฐุง ุงููุฑุงุฑ ููุชุงุฒ ูุฃู:

โ ุงูููุธู ูุง ูุชุดุชุช ุจูู ุดุงุดุงุช

โ ุงูุฅุฏุฎุงู ุณุฑูุน

โ ุงูุจูุงูุงุช ููุธูุฉ ุฏุงุฎูููุง

โ ุงูุชูุงุฑูุฑ ูุงุญููุง ุชุจูู ุณููุฉ

---

ุณุฃุนุชุจุฑ ูุฐู ูุงุนุฏุฉ ุซุงุจุชุฉ ูู ูู ุงูุฎุทูุงุช ุงููุงุฏูุฉ:

> ุดุงุดุฉ ูุงุญุฏุฉ ููุฅุฏุฎุงู ูุงูุนุฑุถุ ูุฌุฏุงูู ูููุตูุฉ ููุชุฎุฒูู.
> 

ูู ุงูุฎุทูุฉ ุงููุงุฏูุฉ ุณูุจูู:

**ุชุฏูู ุงูุฅุฏุฎุงู ุงูุฐูู (Smart Form Flow)**

ุญุชู ูุง ูุฏุฎู ุงูููุธู ุจูุงูุงุช ููุฑุฑุฉ ุจุฏูู ูุตุฏ.

---